{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useState, useRef, useEffect, useMemo, createElement } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { Vector3, PerspectiveCamera, OrthographicCamera } from 'three';\nimport { unmountComponentAtNode, render } from 'react-dom';\nvar v1 = new Vector3();\nvar v2 = new Vector3();\nvar v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  var widthHalf = size.width / 2;\n  var heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  var deltaCamObj = objectPos.sub(cameraPos);\n  var camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var vFOV = camera.fov * Math.PI / 180;\n    var dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera || camera instanceof OrthographicCamera) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var dist = objectPos.distanceTo(cameraPos);\n    var A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    var B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nvar Html = /*#__PURE__*/forwardRef(_c = _s(function (_ref, ref) {\n  _s();\n\n  var _portal$current;\n\n  var children = _ref.children,\n      _ref$eps = _ref.eps,\n      eps = _ref$eps === void 0 ? 0.001 : _ref$eps,\n      style = _ref.style,\n      className = _ref.className,\n      prepend = _ref.prepend,\n      center = _ref.center,\n      fullscreen = _ref.fullscreen,\n      portal = _ref.portal,\n      scaleFactor = _ref.scaleFactor,\n      _ref$zIndexRange = _ref.zIndexRange,\n      zIndexRange = _ref$zIndexRange === void 0 ? [16777271, 0] : _ref$zIndexRange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  var _useThree = useThree(),\n      gl = _useThree.gl,\n      scene = _useThree.scene,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var _useState = useState(function () {\n    return document.createElement('div');\n  }),\n      el = _useState[0];\n\n  var group = useRef(null);\n  var old = useRef([0, 0]);\n  var target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(function () {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      var vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return function () {\n        if (target) target.removeChild(el);\n        unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  var styles = useMemo(function () {\n    return _extends({\n      position: 'absolute',\n      transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n    }, fullscreen && {\n      top: -size.height / 2,\n      left: -size.width / 2,\n      width: size.width,\n      height: size.height\n    }, style);\n  }, [style, center, fullscreen, size]);\n  useEffect(function () {\n    return void render( /*#__PURE__*/createElement(\"div\", {\n      ref: ref,\n      style: styles,\n      className: className,\n      children: children\n    }), el);\n  });\n  useFrame(function () {\n    if (group.current) {\n      camera.updateMatrixWorld();\n      var vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        var scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n}, \"RryLa9sLk6yY/t+qh5kHjQ2OiDs=\", false, function () {\n  return [useThree, useFrame];\n}));\n_c2 = Html;\nvar HTML = /*#__PURE__*/forwardRef(_c3 = _s2(function (props, ref) {\n  _s2();\n\n  useEffect(function () {\n    return void console.warn('The <HTML> component was renamed to <Html>');\n  }, []);\n  return /*#__PURE__*/createElement(Html, _extends({}, props, {\n    ref: ref\n  }));\n}, \"OD7bBpZva5O2jO+Puf00hKivP7c=\"));\n_c4 = HTML;\nexport { HTML, Html };\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Html$forwardRef\");\n$RefreshReg$(_c2, \"Html\");\n$RefreshReg$(_c3, \"HTML$forwardRef\");\n$RefreshReg$(_c4, \"HTML\");","map":{"version":3,"sources":["/Users/juliette/Sites/localhost/GOBELINS/next.js/examples/with-three-js/node_modules/drei/Html.js"],"names":["_extends","_objectWithoutPropertiesLoose","forwardRef","useState","useRef","useEffect","useMemo","createElement","useThree","useFrame","Vector3","PerspectiveCamera","OrthographicCamera","unmountComponentAtNode","render","v1","v2","v3","calculatePosition","el","camera","size","objectPos","setFromMatrixPosition","matrixWorld","project","widthHalf","width","heightHalf","height","x","y","isObjectBehindCamera","cameraPos","deltaCamObj","sub","camDir","getWorldDirection","angleTo","Math","PI","objectScale","vFOV","fov","dist","distanceTo","tan","zoom","objectZIndex","zIndexRange","A","far","near","B","round","undefined","Html","_ref","ref","_portal$current","children","eps","style","className","prepend","center","fullscreen","portal","scaleFactor","props","gl","scene","document","group","old","target","current","domElement","parentNode","updateMatrixWorld","vec","cssText","appendChild","removeChild","styles","position","transform","top","left","abs","display","scale","zIndex","HTML","console","warn"],"mappings":";;;AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,6BAAP,MAA0C,yDAA1C;AACA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,MAA/B,EAAuCC,SAAvC,EAAkDC,OAAlD,EAA2DC,aAA3D,QAAgF,OAAhF;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,mBAAnC;AACA,SAASC,OAAT,EAAkBC,iBAAlB,EAAqCC,kBAArC,QAA+D,OAA/D;AACA,SAASC,sBAAT,EAAiCC,MAAjC,QAA+C,WAA/C;AAEA,IAAMC,EAAE,GAAG,IAAIL,OAAJ,EAAX;AACA,IAAMM,EAAE,GAAG,IAAIN,OAAJ,EAAX;AACA,IAAMO,EAAE,GAAG,IAAIP,OAAJ,EAAX;;AAEA,SAASQ,iBAAT,CAA2BC,EAA3B,EAA+BC,MAA/B,EAAuCC,IAAvC,EAA6C;AAC3C,MAAMC,SAAS,GAAGP,EAAE,CAACQ,qBAAH,CAAyBJ,EAAE,CAACK,WAA5B,CAAlB;AACAF,EAAAA,SAAS,CAACG,OAAV,CAAkBL,MAAlB;AACA,MAAMM,SAAS,GAAGL,IAAI,CAACM,KAAL,GAAa,CAA/B;AACA,MAAMC,UAAU,GAAGP,IAAI,CAACQ,MAAL,GAAc,CAAjC;AACA,SAAO,CAACP,SAAS,CAACQ,CAAV,GAAcJ,SAAd,GAA0BA,SAA3B,EAAsC,EAAEJ,SAAS,CAACS,CAAV,GAAcH,UAAhB,IAA8BA,UAApE,CAAP;AACD;;AAED,SAASI,oBAAT,CAA8Bb,EAA9B,EAAkCC,MAAlC,EAA0C;AACxC,MAAME,SAAS,GAAGP,EAAE,CAACQ,qBAAH,CAAyBJ,EAAE,CAACK,WAA5B,CAAlB;AACA,MAAMS,SAAS,GAAGjB,EAAE,CAACO,qBAAH,CAAyBH,MAAM,CAACI,WAAhC,CAAlB;AACA,MAAMU,WAAW,GAAGZ,SAAS,CAACa,GAAV,CAAcF,SAAd,CAApB;AACA,MAAMG,MAAM,GAAGhB,MAAM,CAACiB,iBAAP,CAAyBpB,EAAzB,CAAf;AACA,SAAOiB,WAAW,CAACI,OAAZ,CAAoBF,MAApB,IAA8BG,IAAI,CAACC,EAAL,GAAU,CAA/C;AACD;;AAED,SAASC,WAAT,CAAqBtB,EAArB,EAAyBC,MAAzB,EAAiC;AAC/B,MAAIA,MAAM,YAAYT,iBAAtB,EAAyC;AACvC,QAAMW,SAAS,GAAGP,EAAE,CAACQ,qBAAH,CAAyBJ,EAAE,CAACK,WAA5B,CAAlB;AACA,QAAMS,SAAS,GAAGjB,EAAE,CAACO,qBAAH,CAAyBH,MAAM,CAACI,WAAhC,CAAlB;AACA,QAAMkB,IAAI,GAAGtB,MAAM,CAACuB,GAAP,GAAaJ,IAAI,CAACC,EAAlB,GAAuB,GAApC;AACA,QAAMI,IAAI,GAAGtB,SAAS,CAACuB,UAAV,CAAqBZ,SAArB,CAAb;AACA,WAAO,KAAK,IAAIM,IAAI,CAACO,GAAL,CAASJ,IAAI,GAAG,CAAhB,CAAJ,GAAyBE,IAA9B,CAAP;AACD;;AAED,MAAIxB,MAAM,YAAYR,kBAAtB,EAA0C,OAAOQ,MAAM,CAAC2B,IAAd;AAC1C,SAAO,CAAP;AACD;;AAED,SAASC,YAAT,CAAsB7B,EAAtB,EAA0BC,MAA1B,EAAkC6B,WAAlC,EAA+C;AAC7C,MAAI7B,MAAM,YAAYT,iBAAlB,IAAuCS,MAAM,YAAYR,kBAA7D,EAAiF;AAC/E,QAAMU,SAAS,GAAGP,EAAE,CAACQ,qBAAH,CAAyBJ,EAAE,CAACK,WAA5B,CAAlB;AACA,QAAMS,SAAS,GAAGjB,EAAE,CAACO,qBAAH,CAAyBH,MAAM,CAACI,WAAhC,CAAlB;AACA,QAAMoB,IAAI,GAAGtB,SAAS,CAACuB,UAAV,CAAqBZ,SAArB,CAAb;AACA,QAAMiB,CAAC,GAAG,CAACD,WAAW,CAAC,CAAD,CAAX,GAAiBA,WAAW,CAAC,CAAD,CAA7B,KAAqC7B,MAAM,CAAC+B,GAAP,GAAa/B,MAAM,CAACgC,IAAzD,CAAV;AACA,QAAMC,CAAC,GAAGJ,WAAW,CAAC,CAAD,CAAX,GAAiBC,CAAC,GAAG9B,MAAM,CAAC+B,GAAtC;AACA,WAAOZ,IAAI,CAACe,KAAL,CAAWJ,CAAC,GAAGN,IAAJ,GAAWS,CAAtB,CAAP;AACD;;AAED,SAAOE,SAAP;AACD;;AAED,IAAMC,IAAI,GAAG,aAAatD,UAAU,SAAC,UAACuD,IAAD,EAAOC,GAAP,EAAe;AAAA;;AAClD,MAAIC,eAAJ;;AADkD,MAIhDC,QAJgD,GAc9CH,IAd8C,CAIhDG,QAJgD;AAAA,iBAc9CH,IAd8C,CAKhDI,GALgD;AAAA,MAKhDA,GALgD,yBAK1C,KAL0C;AAAA,MAMhDC,KANgD,GAc9CL,IAd8C,CAMhDK,KANgD;AAAA,MAOhDC,SAPgD,GAc9CN,IAd8C,CAOhDM,SAPgD;AAAA,MAQhDC,OARgD,GAc9CP,IAd8C,CAQhDO,OARgD;AAAA,MAShDC,MATgD,GAc9CR,IAd8C,CAShDQ,MATgD;AAAA,MAUhDC,UAVgD,GAc9CT,IAd8C,CAUhDS,UAVgD;AAAA,MAWhDC,MAXgD,GAc9CV,IAd8C,CAWhDU,MAXgD;AAAA,MAYhDC,WAZgD,GAc9CX,IAd8C,CAYhDW,WAZgD;AAAA,yBAc9CX,IAd8C,CAahDR,WAbgD;AAAA,MAahDA,WAbgD,iCAalC,CAAC,QAAD,EAAW,CAAX,CAbkC;AAAA,MAe9CoB,KAf8C,GAetCpE,6BAA6B,CAACwD,IAAD,EAAO,CAAC,UAAD,EAAa,KAAb,EAAoB,OAApB,EAA6B,WAA7B,EAA0C,SAA1C,EAAqD,QAArD,EAA+D,YAA/D,EAA6E,QAA7E,EAAuF,aAAvF,EAAsG,aAAtG,CAAP,CAfS;;AAAA,kBAsB9CjD,QAAQ,EAtBsC;AAAA,MAkBhD8D,EAlBgD,aAkBhDA,EAlBgD;AAAA,MAmBhDC,KAnBgD,aAmBhDA,KAnBgD;AAAA,MAoBhDnD,MApBgD,aAoBhDA,MApBgD;AAAA,MAqBhDC,IArBgD,aAqBhDA,IArBgD;;AAAA,kBAuBrClB,QAAQ,CAAC;AAAA,WAAMqE,QAAQ,CAACjE,aAAT,CAAuB,KAAvB,CAAN;AAAA,GAAD,CAvB6B;AAAA,MAuB3CY,EAvB2C;;AAwBlD,MAAMsD,KAAK,GAAGrE,MAAM,CAAC,IAAD,CAApB;AACA,MAAMsE,GAAG,GAAGtE,MAAM,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAAlB;AACA,MAAMuE,MAAM,GAAG,CAAChB,eAAe,GAAGQ,MAAM,IAAI,IAAV,GAAiB,KAAK,CAAtB,GAA0BA,MAAM,CAACS,OAApD,KAAgE,IAAhE,GAAuEjB,eAAvE,GAAyFW,EAAE,CAACO,UAAH,CAAcC,UAAtH;AACAzE,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIoE,KAAK,CAACG,OAAV,EAAmB;AACjBL,MAAAA,KAAK,CAACQ,iBAAN;AACA,UAAMC,GAAG,GAAG9D,iBAAiB,CAACuD,KAAK,CAACG,OAAP,EAAgBxD,MAAhB,EAAwBC,IAAxB,CAA7B;AACAF,MAAAA,EAAE,CAAC2C,KAAH,CAASmB,OAAT,GAAmB,0DAA0DD,GAAG,CAAC,CAAD,CAA7D,GAAmE,KAAnE,GAA2EA,GAAG,CAAC,CAAD,CAA9E,GAAoF,6BAAvG;;AAEA,UAAIL,MAAJ,EAAY;AACV,YAAIX,OAAJ,EAAaW,MAAM,CAACX,OAAP,CAAe7C,EAAf,EAAb,KAAqCwD,MAAM,CAACO,WAAP,CAAmB/D,EAAnB;AACtC;;AAED,aAAO,YAAM;AACX,YAAIwD,MAAJ,EAAYA,MAAM,CAACQ,WAAP,CAAmBhE,EAAnB;AACZN,QAAAA,sBAAsB,CAACM,EAAD,CAAtB;AACD,OAHD;AAID,KAda,CAcZ;;AAEH,GAhBQ,EAgBN,CAACwD,MAAD,CAhBM,CAAT;AAiBA,MAAMS,MAAM,GAAG9E,OAAO,CAAC;AAAA,WAAMN,QAAQ,CAAC;AACpCqF,MAAAA,QAAQ,EAAE,UAD0B;AAEpCC,MAAAA,SAAS,EAAErB,MAAM,GAAG,0BAAH,GAAgC;AAFb,KAAD,EAGlCC,UAAU,IAAI;AACfqB,MAAAA,GAAG,EAAE,CAAClE,IAAI,CAACQ,MAAN,GAAe,CADL;AAEf2D,MAAAA,IAAI,EAAE,CAACnE,IAAI,CAACM,KAAN,GAAc,CAFL;AAGfA,MAAAA,KAAK,EAAEN,IAAI,CAACM,KAHG;AAIfE,MAAAA,MAAM,EAAER,IAAI,CAACQ;AAJE,KAHoB,EAQlCiC,KARkC,CAAd;AAAA,GAAD,EAQX,CAACA,KAAD,EAAQG,MAAR,EAAgBC,UAAhB,EAA4B7C,IAA5B,CARW,CAAtB;AASAhB,EAAAA,SAAS,CAAC;AAAA,WAAM,KAAKS,MAAM,EAAE,aAAaP,aAAa,CAAC,KAAD,EAAQ;AAC7DmD,MAAAA,GAAG,EAAEA,GADwD;AAE7DI,MAAAA,KAAK,EAAEsB,MAFsD;AAG7DrB,MAAAA,SAAS,EAAEA,SAHkD;AAI7DH,MAAAA,QAAQ,EAAEA;AAJmD,KAAR,CAA5B,EAKvBzC,EALuB,CAAjB;AAAA,GAAD,CAAT;AAMAV,EAAAA,QAAQ,CAAC,YAAM;AACb,QAAIgE,KAAK,CAACG,OAAV,EAAmB;AACjBxD,MAAAA,MAAM,CAAC2D,iBAAP;AACA,UAAMC,GAAG,GAAG9D,iBAAiB,CAACuD,KAAK,CAACG,OAAP,EAAgBxD,MAAhB,EAAwBC,IAAxB,CAA7B;;AAEA,UAAIkB,IAAI,CAACkD,GAAL,CAASf,GAAG,CAACE,OAAJ,CAAY,CAAZ,IAAiBI,GAAG,CAAC,CAAD,CAA7B,IAAoCnB,GAApC,IAA2CtB,IAAI,CAACkD,GAAL,CAASf,GAAG,CAACE,OAAJ,CAAY,CAAZ,IAAiBI,GAAG,CAAC,CAAD,CAA7B,IAAoCnB,GAAnF,EAAwF;AACtF1C,QAAAA,EAAE,CAAC2C,KAAH,CAAS4B,OAAT,GAAmB,CAAC1D,oBAAoB,CAACyC,KAAK,CAACG,OAAP,EAAgBxD,MAAhB,CAArB,GAA+C,OAA/C,GAAyD,MAA5E;AACA,YAAMuE,KAAK,GAAGvB,WAAW,KAAKb,SAAhB,GAA4B,CAA5B,GAAgCd,WAAW,CAACgC,KAAK,CAACG,OAAP,EAAgBxD,MAAhB,CAAX,GAAqCgD,WAAnF;AACAjD,QAAAA,EAAE,CAAC2C,KAAH,CAASwB,SAAT,GAAqB,iBAAiBN,GAAG,CAAC,CAAD,CAApB,GAA0B,KAA1B,GAAkCA,GAAG,CAAC,CAAD,CAArC,GAA2C,cAA3C,GAA4DW,KAA5D,GAAoE,GAAzF;AACAxE,QAAAA,EAAE,CAAC2C,KAAH,CAAS8B,MAAT,GAAkB,KAAK5C,YAAY,CAACyB,KAAK,CAACG,OAAP,EAAgBxD,MAAhB,EAAwB6B,WAAxB,CAAnC;AACD;;AAEDyB,MAAAA,GAAG,CAACE,OAAJ,GAAcI,GAAd;AACD;AACF,GAdO,CAAR;AAeA,SAAO,aAAazE,aAAa,CAAC,OAAD,EAAUP,QAAQ,CAAC,EAAD,EAAKqE,KAAL,EAAY;AAC7DX,IAAAA,GAAG,EAAEe;AADwD,GAAZ,CAAlB,CAAjC;AAGD,CA7EmC;AAAA,UAsB9BjE,QAtB8B,EA2DlCC,QA3DkC;AAAA,GAApC;MAAM+C,I;AA8EN,IAAMqC,IAAI,GAAG,aAAa3F,UAAU,WAAC,UAACmE,KAAD,EAAQX,GAAR,EAAgB;AAAA;;AACnDrD,EAAAA,SAAS,CAAC;AAAA,WAAM,KAAKyF,OAAO,CAACC,IAAR,CAAa,4CAAb,CAAX;AAAA,GAAD,EAAwE,EAAxE,CAAT;AACA,SAAO,aAAaxF,aAAa,CAACiD,IAAD,EAAOxD,QAAQ,CAAC,EAAD,EAAKqE,KAAL,EAAY;AAC1DX,IAAAA,GAAG,EAAEA;AADqD,GAAZ,CAAf,CAAjC;AAGD,CALmC,kCAApC;MAAMmC,I;AAON,SAASA,IAAT,EAAerC,IAAf","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useState, useRef, useEffect, useMemo, createElement } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { Vector3, PerspectiveCamera, OrthographicCamera } from 'three';\nimport { unmountComponentAtNode, render } from 'react-dom';\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera || camera instanceof OrthographicCamera) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nconst Html = /*#__PURE__*/forwardRef((_ref, ref) => {\n  var _portal$current;\n\n  let {\n    children,\n    eps = 0.001,\n    style,\n    className,\n    prepend,\n    center,\n    fullscreen,\n    portal,\n    scaleFactor,\n    zIndexRange = [16777271, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const [el] = useState(() => document.createElement('div'));\n  const group = useRef(null);\n  const old = useRef([0, 0]);\n  const target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(() => {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      const vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return () => {\n        if (target) target.removeChild(el);\n        unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  const styles = useMemo(() => _extends({\n    position: 'absolute',\n    transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n  }, fullscreen && {\n    top: -size.height / 2,\n    left: -size.width / 2,\n    width: size.width,\n    height: size.height\n  }, style), [style, center, fullscreen, size]);\n  useEffect(() => void render( /*#__PURE__*/createElement(\"div\", {\n    ref: ref,\n    style: styles,\n    className: className,\n    children: children\n  }), el));\n  useFrame(() => {\n    if (group.current) {\n      camera.updateMatrixWorld();\n      const vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        const scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\nconst HTML = /*#__PURE__*/forwardRef((props, ref) => {\n  useEffect(() => void console.warn('The <HTML> component was renamed to <Html>'), []);\n  return /*#__PURE__*/createElement(Html, _extends({}, props, {\n    ref: ref\n  }));\n});\n\nexport { HTML, Html };\n"]},"metadata":{},"sourceType":"module"}